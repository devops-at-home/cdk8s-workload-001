// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`cert-mnager-webhook-external-dns Snapshot test 1`] = `
[
  {
    "apiVersion": "apiregistration.k8s.io/v1",
    "kind": "APIService",
    "metadata": {
      "annotations": {
        "cert-manager.io/inject-ca-from": "cert-manager/externaldns-webhook-tls",
      },
      "labels": {
        "app": "externaldns-webhook",
        "chart": "cert-mnager-webhook-external-dns",
      },
      "name": "v1alpha1.example.com",
      "namespace": "cert-manager",
    },
    "spec": {
      "group": "example.com",
      "groupPriorityMinimum": 1000,
      "service": {
        "name": "externaldns-webhook",
        "namespace": "cert-manager",
      },
      "version": "v1alpha1",
      "versionPriority": 15,
    },
  },
  {
    "apiVersion": "cert-manager.io/v1",
    "kind": "Certificate",
    "metadata": {
      "labels": {
        "app": "externaldns-webhook",
        "chart": "cert-mnager-webhook-external-dns",
      },
      "name": "externaldns-webhook-ca",
      "namespace": "cert-manager",
    },
    "spec": {
      "commonName": "ca.externaldns-webhook.cert-manager",
      "duration": "43800h",
      "isCA": true,
      "issuerRef": {
        "name": "externaldns-webhook-selfsign",
      },
      "secretName": "externaldns-webhook-ca",
    },
  },
  {
    "apiVersion": "apps/v1",
    "kind": "Deployment",
    "metadata": {
      "labels": {
        "app": "externaldns-webhook",
        "chart": "cert-mnager-webhook-external-dns",
      },
      "name": "cert-manager-externaldns-webhook",
      "namespace": "cert-manager",
    },
    "spec": {
      "replicas": 1,
      "selector": {
        "matchLabels": {
          "app": "externaldns-webhook",
        },
      },
      "template": {
        "metadata": {
          "labels": {
            "app": "externaldns-webhook",
          },
        },
        "spec": {
          "containers": [
            {
              "args": [
                "--tls-cert-file=/tls/tls.crt",
                "--tls-private-key-file=/tls/tls.key",
              ],
              "env": [
                {
                  "name": "GROUP_NAME",
                  "value": "example.com",
                },
              ],
              "image": "absaoss/cert-manager-webhook-externaldns:dev",
              "livenessProbe": {
                "httpGet": {
                  "path": "/healthz",
                  "port": 443,
                  "scheme": "HTTPS",
                },
              },
              "name": "cert-manager-webhook-externaldns",
              "ports": [
                {
                  "containerPort": 443,
                  "name": "https",
                  "protocol": "TCP",
                },
              ],
              "readinessProbe": {
                "httpGet": {
                  "path": "/healthz",
                  "port": 443,
                  "scheme": "HTTPS",
                },
              },
              "volumeMounts": [
                {
                  "mountPath": "/tls",
                  "name": "certs",
                  "readOnly": true,
                },
              ],
            },
          ],
          "serviceAccountName": "externaldns-webhook",
          "volumes": [
            {
              "name": "certs",
              "secret": {
                "secretName": "externaldns-webhook-tls",
              },
            },
          ],
        },
      },
    },
  },
  {
    "apiVersion": "cert-manager.io/v1",
    "kind": "Issuer",
    "metadata": {
      "labels": {
        "app": "externaldns-webhook",
        "chart": "cert-mnager-webhook-external-dns",
      },
      "name": "externaldns-webhook-selfsign",
      "namespace": "cert-manager",
    },
    "spec": {
      "selfSigned": {},
    },
  },
  {
    "apiVersion": "cert-manager.io/v1",
    "kind": "Issuer",
    "metadata": {
      "labels": {
        "app": "externaldns-webhook",
        "chart": "cert-mnager-webhook-external-dns",
      },
      "name": "externaldns-webhook-ca",
      "namespace": "cert-manager",
    },
    "spec": {
      "ca": {
        "secretName": "externaldns-webhook-ca",
      },
    },
  },
  {
    "apiVersion": "v1",
    "kind": "ServiceAccount",
    "metadata": {
      "labels": {
        "app": "externaldns-webhook",
        "chart": "cert-mnager-webhook-external-dns",
      },
      "name": "externaldns-webhook",
      "namespace": "cert-manager",
    },
  },
  {
    "apiVersion": "rbac.authorization.k8s.io/v1",
    "kind": "RoleBinding",
    "metadata": {
      "labels": {
        "app": "externaldns-webhook",
        "chart": "cert-mnager-webhook-external-dns",
      },
      "name": "externaldns-webhook:webhook-authentication-reader",
      "namespace": "kube-system",
    },
    "roleRef": {
      "apiGroup": "rbac.authorization.k8s.io",
      "kind": "Role",
      "name": "extension-apiserver-authentication-reader",
    },
    "subjects": [
      {
        "apiGroup": "",
        "kind": "ServiceAccount",
        "name": "externaldns-webhook",
        "namespace": "cert-manager",
      },
    ],
  },
  {
    "apiVersion": "rbac.authorization.k8s.io/v1",
    "kind": "ClusterRoleBinding",
    "metadata": {
      "labels": {
        "app": "externaldns-webhook",
        "chart": "cert-mnager-webhook-external-dns",
      },
      "name": "externaldns-webhook:auth-delegator",
      "namespace": "cert-manager",
    },
    "roleRef": {
      "apiGroup": "rbac.authorization.k8s.io",
      "kind": "ClusterRole",
      "name": "system:auth-delegator",
    },
    "subjects": [
      {
        "apiGroup": "",
        "kind": "ServiceAccount",
        "name": "externaldns-webhook",
        "namespace": "cert-manager",
      },
    ],
  },
  {
    "apiVersion": "rbac.authorization.k8s.io/v1",
    "kind": "ClusterRole",
    "metadata": {
      "labels": {
        "app": "externaldns-webhook",
        "chart": "cert-mnager-webhook-external-dns",
      },
      "name": "externaldns-webhook-role",
      "namespace": "cert-manager",
    },
    "rules": [
      {
        "apiGroups": [
          "externaldns.k8s.io",
        ],
        "resources": [
          "dnsendpoints",
        ],
        "verbs": [
          "create",
          "list",
          "delete",
        ],
      },
      {
        "apiGroups": [
          "flowcontrol.apiserver.k8s.io",
        ],
        "resources": [
          "flowschemas",
          "prioritylevelconfigurations",
        ],
        "verbs": [
          "list",
          "watch",
        ],
      },
    ],
  },
  {
    "apiVersion": "rbac.authorization.k8s.io/v1",
    "kind": "ClusterRoleBinding",
    "metadata": {
      "labels": {
        "app": "externaldns-webhook",
        "chart": "cert-mnager-webhook-external-dns",
      },
      "name": "externaldns-webhook:flowcontrol",
      "namespace": "cert-manager",
    },
    "roleRef": {
      "apiGroup": "rbac.authorization.k8s.io",
      "kind": "ClusterRole",
      "name": "externaldns-webhook-role",
    },
    "subjects": [
      {
        "apiGroup": "",
        "kind": "ServiceAccount",
        "name": "externaldns-webhook",
        "namespace": "cert-manager",
      },
    ],
  },
  {
    "apiVersion": "cert-manager.io/v1",
    "kind": "Certificate",
    "metadata": {
      "labels": {
        "app": "externaldns-webhook",
        "chart": "cert-mnager-webhook-external-dns",
      },
      "name": "externaldns-webhook-tls",
      "namespace": "cert-manager",
    },
    "spec": {
      "dnsNames": [
        "externaldns-webhook",
        "externaldns-webhook.cert-manager",
        "externaldns-webhook.cert-manager.svc",
        "externaldns-webhook.cert-manager.svc.cluster.local",
      ],
      "duration": "8760h",
      "issuerRef": {
        "name": "externaldns-webhook-ca",
      },
      "secretName": "externaldns-webhook-tls",
    },
  },
  {
    "apiVersion": "v1",
    "kind": "Service",
    "metadata": {
      "labels": {
        "app": "externaldns-webhook",
        "chart": "cert-mnager-webhook-external-dns",
      },
      "name": "externaldns-webhook",
      "namespace": "cert-manager",
    },
    "spec": {
      "ports": [
        {
          "name": "https",
          "port": 443,
          "protocol": "TCP",
        },
      ],
      "selector": {
        "app": "externaldns-webhook",
      },
      "type": "ClusterIP",
    },
  },
]
`;
